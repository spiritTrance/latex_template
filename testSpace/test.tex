\documentclass{ctexart}
\usepackage[dvipsnames, svgnames, x11names]{xcolor}
\usepackage[top=2cm,bottom=2cm,left=1cm,right=4cm]{geometry}
\usepackage[bookmarks=true,bookmarksopen=true,bookmarksnumbered=true]{hyperref}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{tabularx}
\usepackage[most]{tcolorbox}
\usepackage{amsmath}
\usepackage{multicol}
\usepackage{pifont}
\usepackage{enumitem}
\usepackage{bbding}
\usepackage{colortbl}
\usepackage{placeins}
\usepackage[morefloats = 18]{morefloats}
\usepackage{mathpazo}
\usepackage{bm}
\usepackage{tikz}
\usepackage{xparse}

\lstset{
    numbers = none ,                                    %可选参数有none,right,left
    breaklines ,                                        %换行有影响，不加这个则换行时从头开始
    numberstyle = \tiny ,                               %数字大小’
    keywordstyle = \color{blue!70} ,                    %关键字颜色
    commentstyle =\color{black!40!white} ,              %注释颜色
    % frame = shadowbox ,                                 %阴影设置
    % rulesepcolor = \color{red!20!green!20!blue!20} ,    %阴影颜色设置
    escapeinside =`',                                   %lst中文支持不太好，可以用这个括在中文旁边
    basicstyle =\footnotesize\ttfamily                  %代码字体设置
}

\definecolor{myDefinationColor}{RGB}{0,118,174}
\tcbset{
    myDefinationStyle/.style={
    enhanced,
    breakable,
    colback=myDefinationColor!10,
    colframe=myDefinationColor,
    fonttitle=\bfseries,
    colbacktitle=myDefinationColor,
    attach boxed title to top left={},
    boxed title style = {sharp corners},
    boxrule=1pt,
    toprule=1pt,
    bottomrule=1pt,
    top=1pt,
    left=1pt,
    right=1pt,
    bottom=1pt,
    before skip=8pt,
    sharp corners,
    },
}

\NewDocumentEnvironment{code}{mm}{
  \begin{tcolorbox}[
    title=#1,
    myDefinationStyle
  ]
  \begin{lstlisting}[
    language=#2
  ]
}
{
  \end{lstlisting}
  \end{tcolorbox}
}




\begin{document}
\begin{code}{filename.m}{c++}
#include<bits/stdc++.h>
using namespace std;
int main(){
  cout<<"Good"<<endl;   //guud
}
\end{code}
\end{document}